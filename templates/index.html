<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ONE KEF Assistant</title>
  <link rel="icon" type="image/png" href="/static/kotak-logo.png">
  <style>
    body {
      margin: 0;
      background: linear-gradient(120deg, #f9f9ff, #eef2f7);
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }

    #chat-widget {
      width: 360px;
      height: 560px;
      background-color: #fff;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      border: 2px solid #e4002b;
    }

    .chat-header {
      background: linear-gradient(135deg, #e4002b, #002f6c);
      color: white;
      padding: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .chat-header img {
      width: 110px;
      height: auto;
      object-fit: contain;
      background-color: white;
      border-radius: 4px;
    }

    .chat-header .name {
      font-weight: bold;
      font-size: 16px;
    }

    .tagline {
      text-align: center;
      font-size: 12px;
      color: #555;
      background-color: #f9f9f9;
      padding: 4px 10px;
    }

    #chatbox {
      flex: 1;
      padding: 15px;
      background-color: #fafafa;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    select, textarea {
      width: 100%;
      padding: 10px;
      font-size: 14px;
      margin-bottom: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }

    textarea {
      resize: none;
      height: 180px;
      background: #f0f0f0;
    }
  </style>
</head>
<body>
  <div id="chat-widget">
    <div class="chat-header">
      <img src="/static/kotak-logo.png" alt="Kotak Logo">
      <div class="name">ONE KEF Assistant</div>
    </div>
    <div class="tagline">Powered by Kotak Education Foundation</div>
    <div id="chatbox">
      <label for="category">Step 1: Select a Category</label>
      <select id="category">
        <option value="">-- Select Category --</option>
      </select>

      <label for="question">Step 2: Select a Question</label>
      <select id="question" disabled>
        <option value="">-- Select Question --</option>
      </select>

      <label for="answer">Answer:</label>
      <textarea id="answer" readonly placeholder="Answer will appear here..."></textarea>
    </div>
  </div>

  <script>
    const faqData = {
      "Login & Access Issues": {
        "What does â€œBeneficiary User ID invalidâ€ mean or why is my account not letting me log in?":
          "If you're seeing the message â€œBeneficiary User ID invalidâ€ or are unable to log in, here are some possible reasons:\n\nâœ… You may have entered your Username or Password incorrectly\n- Usernames and Passwords are case-sensitive. Double-check spelling and spaces.\n\nâœ… Your User ID was provided by KEF\n- Contact your KEF facilitator if youâ€™re unsure.\n\nâœ… Too many wrong attempts? Your account might be locked\n- A reset link may be sent to your email. If not received, inform your facilitator.\n\nðŸ’¡ Tip: Always keep your login details safe and private.",
        "What should I do if I need to update my contact number for login ID creation?":
          "If your contact number has changed or needs to be corrected:\n\n1ï¸âƒ£ Inform your KEF facilitator and share:\n- Updated phone number\n- Your name, school, and geography\n\n2ï¸âƒ£ Or raise a request using 'Site Support' with:\n- Full name\n- Old and new phone numbers\n- Login ID, school, geography\n\nðŸ“Œ Your contact number is important for verification and support communication.",
        "What can I do if I canâ€™t see the course on my dashboard?":
          "If your course is not visible:\n\nâœ… You might not be enrolled yet. KEF maps your ID to your school/project manually.\n\nðŸ“Œ What to do:\n- Inform your KEF facilitator\n- Raise a support ticket with your:\n  - Name, login ID, school, geography\n  - Course name (if known)\n\nðŸ”” Once enrollment is done, the course will appear in your dashboard."
      },
      "Course Progress & Activity Issues": {
        "What should I do if I can't understand how to go to the next step in the course?":
          "If you're stuck:\n\nâœ… Complete the Previous Activity Fully:\n- Finish H5P activities completely\n- Click the â­ icon or 'Submit Answers'\n\nâœ… On Mobile?\n- Use the Moodle app\n- Or turn on Desktop Mode in browser\n\nâœ… Refresh or Reopen the Activity\nStill facing issues? Contact KEF support.",
        "What should I do if Iâ€™m facing technical problems like â€œFile not foundâ€?":
          "If you see a 'File not found' error:\n\n1ï¸âƒ£ Note the course and specific video/resource\n\n2ï¸âƒ£ Inform your KEF facilitator or raise a Site Support ticket\n- Include exact file name and course details\n\nðŸ“Œ Why it matters:\n- You need to complete all content for course completion and certificates\n\nIf possible, continue with other course parts and return to the issue later.",
        "I have completed the course, but why can't I download my certificate?":
          "Check the following:\n\nâœ… Course Completion\n- Progress bar should show 100%\n- Common misses:\n  - Not clicking 'Submit' on quizzes\n  - Not finishing videos completely\n\nâœ… Where to find your certificate:\n- Go to 'Certificates' in your dashboard (OneKEF website/app)\n\nStill not visible?\n- Inform your facilitator â€” support team will manually issue it."
      },
      "Certificate Issues": {
        "How can I request a name correction on my certificate?":
          "Steps:\n\nâœ… Inform your KEF facilitator\n- Provide your correct name (first and last)\n- Include login ID, course name, school/geography\n\nâœ… Or raise a Site Support ticket with:\n- Current and correct names\n- Login ID\n- Course/geography\n\nðŸ“Œ Tip: Raise correction within 30 days of course completion.",
        "I have completed the course, but canâ€™t download the certificate":
          "Ensure 100% course completion. Check:\n\n- All quizzes submitted\n- All videos watched\n- Interactive activities completed\n\nCertificate will appear in 'Certificates' section on dashboard.\n\nIf not, contact KEF facilitator for support team to issue manually."
      },
      "Other Technical or Content Issues": {
        "A course resource (video, PDF, etc.) is not opening properly":
          "Try the following:\n\n1ï¸âƒ£ Refresh the page\n2ï¸âƒ£ Use a different browser or switch to Desktop Mode\n3ï¸âƒ£ Use the Moodle app\n\nStill not opening? Raise a support request with course details and screenshots.",
        "I am facing some other issue (Please describe in detail below)":
          "Please share:\n- Your name, login ID\n- Course name and geography\n- Description of the issue\n- Screenshot (if possible)\n\nUse the â€œSite Supportâ€ section or inform your KEF facilitator."
      }
    };

    const categorySelect = document.getElementById("category");
    const questionSelect = document.getElementById("question");
    const answerBox = document.getElementById("answer");

    // Load Categories
    Object.keys(faqData).forEach(category => {
      const option = document.createElement("option");
      option.value = category;
      option.textContent = category;
      categorySelect.appendChild(option);
    });

    // Handle Category Selection
    categorySelect.addEventListener("change", function () {
      questionSelect.innerHTML = "<option value=''>-- Select Question --</option>";
      answerBox.value = "";
      const selectedCategory = this.value;

      if (selectedCategory) {
        questionSelect.disabled = false;
        const questions = Object.keys(faqData[selectedCategory]);
        questions.forEach(question => {
          const option = document.createElement("option");
          option.value = question;
          option.textContent = question;
          questionSelect.appendChild(option);
        });
      } else {
        questionSelect.disabled = true;
      }
    });

    // Handle Question Selection
    questionSelect.addEventListener("change", function () {
      const category = categorySelect.value;
      const question = this.value;
      if (faqData[category] && faqData[category][question]) {
        answerBox.value = faqData[category][question];
      } else {
        answerBox.value = "";
      }
    });
  </script>
</body>
</html>
